<!DOCTYPE html>
<html>

    <head>
        <link rel="stylesheet" href="/styles/base.css">
        <script type="module">

            const errorParagraph = document.querySelector('p.error')

            async function register() {
                errorParagraph.style.display = 'none'
                const username = document.getElementById('usernameInput').value
                const password = document.getElementById('passwordInput').value
                const response = await fetch('/api/users/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: username, password: password })
                })
                if (response.status === 200) {
                    // Registrierung hat geklappt, Umleitung zur Startseite, damit Men√º neu aufgebaut werden kann
                    parent.location.href = '/'
                } else {
                    errorParagraph.style.display = 'block'
                }
            }

            document.getElementById('sendButton').addEventListener('click', register)

        </script>

    </head>
    
    <body class="form">

        <h1>Registrierung</h1>

        <h2>Benutzername</h2>
        <input id="usernameInput" name="username" autocomplete="username" />

        <h2>Passwort</h2>
        <input id="passwordInput" name="password" autocomplete="new-password" type="password"/>

        <button id="sendButton">Registrieren</button>

        <p class="error">Registrierung fehlgeschlagen</p>

    </body>

</html>